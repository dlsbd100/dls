<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teams from Players Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
    <div class="container mx-auto px-4 py-6">
        <h1 class="text-2xl font-semibold mb-4">Teams from Players Form</h1>
        
        <!-- Container to display team names -->
        <div id="teamsContainer">
            <!-- Teams will be injected here -->
        </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDooTNeDHoWUU9nLxYxyBIhewydt7Xl_M0",
        authDomain: "dlstournament-31ac1.firebaseapp.com",
        projectId: "dlstournament-31ac1",
        storageBucket: "dlstournament-31ac1.appspot.com",
        messagingSenderId: "874377019055",
        appId: "1:874377019055:web:6e38db2ec7f0d541d2de5a",
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Function to load team names from the playersform collection
      async function loadTeams() {
        try {
          const snapshot = await getDocs(collection(db, "playersform"));
          const teamsContainer = document.getElementById("teamsContainer");

          if (snapshot.empty) {
            teamsContainer.innerHTML = `<p class="text-gray-500 text-center">No teams found in players form.</p>`;
            return;
          }

          const teams = new Set(); // Use a Set to ensure unique team names
          snapshot.forEach(doc => {
            const data = doc.data();
            if (data.team) {
              teams.add(data.team); // Add the team name to the set
            }
          });

          // Create a list of unique teams
          let html = "<div class='space-y-4'>";
          teams.forEach(team => {
            html += `
              <div class="bg-white border p-4 rounded shadow-sm">
                <div class="text-lg font-semibold">${team}</div>
              </div>
            `;
          });
          html += "</div>";

          teamsContainer.innerHTML = html;

        } catch (error) {
          console.error("Error fetching teams:", error);
        }
      }

      // Load the teams when the page is loaded
      loadTeams();
    </script>
</body>
</html>
